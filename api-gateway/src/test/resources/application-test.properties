# Test configuration for integration tests
logging.level.com.library.apigateway=DEBUG
spring.jpa.hibernate.ddl-auto=create-drop

# Exclude problematic auto-configurations
spring.autoconfigure.exclude=\
  org.springframework.cloud.gateway.config.GatewayAutoConfiguration,\
  org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration,\
  org.springframework.cloud.gateway.config.GatewayMetricsAutoConfiguration,\
  org.springframework.boot.autoconfigure.graphql.GraphQlAutoConfiguration,\
  org.springframework.boot.autoconfigure.graphql.servlet.GraphQlWebMvcAutoConfiguration,\
  graphql.kickstart.autoconfigure.tools.GraphQLJavaToolsAutoConfiguration,\
  graphql.kickstart.autoconfigure.web.servlet.GraphQLWebAutoConfiguration,\
  net.devh.boot.grpc.client.autoconfigure.GrpcClientAutoConfiguration,\
  net.devh.boot.grpc.client.autoconfigure.GrpcClientHealthAutoConfiguration

# Use H2 in-memory database for tests
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# Disable Spring Cloud version compatibility check for tests
spring.cloud.compatibility-verifier.enabled=false

# gRPC test configuration
grpc.client.bookService.address=static://localhost:9091
grpc.client.userService.address=static://localhost:9092
grpc.client.bookService.negotiationType=plaintext
grpc.client.userService.negotiationType=plaintext